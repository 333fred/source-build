<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="15.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <ProjectDirectory Condition="'$(PathToRepo)' != ''">$(PathToRepo)</ProjectDirectory>
    <DotnetToolsetInstallOverride Condition="'$(TargetOS)' != 'Windows_NT'">DOTNET_TOOLSET_DIR=$(PreBuiltPJDotnetCliDir) </DotnetToolsetInstallOverride>
    <OverridesForCommands>$(PackagesOverride) $(DotnetToolsetInstallOverride) DOTNET_PATH=Binaries/dotnet-cli/</OverridesForCommands>
    <SyncCommand>$(ProjectDirectory)/Restore.cmd</SyncCommand>
    <SyncCommand Condition="'$(TargetOS)' != 'Windows_NT'">$(OverridesForCommands) $(ProjectDirectory)init-tools$(ShellExtension); 	curl https://dist.nuget.org/win-x86-commandline/v3.5.0-beta2/NuGet.exe -o $(PreBuiltSourcesDir)$(RepositoryName) --create-dirs; $(OverridesForCommands) make toolset restore; $(PreBuiltDotnetCliDir)/dotnet restore $(ProjectDirectory)src/Tools/RepoUtil/RepoUtil.new.csproj</SyncCommand>
    <BuildCommand>$(ProjectDirectory)/cibuild.cmd /$(Configuration) /skipTest /skipCommitPrinting</BuildCommand>
    <BuildCommand Condition="'$(OS)' != 'Windows_NT'">$(ProjectDirectory)/cibuild.sh --$(Configuration) --SkipTests --SkipCrossGen --SkipCommitPrinting</BuildCommand>

    <CsiCoreBaseDirectory>$(ProjectDirectory)Binaries/$(Configuration)/Exes/</CsiCoreBaseDirectory> 
    <CsiCoreWorkingDirectory>$(CsiCoreBaseDirectory)CsiCore/</CsiCoreWorkingDirectory> 
    <CsiCoreWorkingDirectory Condition="'$(_IsBootstrapping)' == 'true'">$(CsiCoreBaseDirectory)CsiCore_working/</CsiCoreWorkingDirectory> 
    <BuildPackagesCommand>$(CsiCoreWorkingDirectory)corerun $(CsiCoreWorkingDirectory)csi.exe src/NuGet/BuildNuGets.csx $(ProjectDirectory)/Binaries/$(Configuration) 42-localbuild $(ProjectDirectory)/Binaries/packages</BuildPackagesCommand>
    <PackagesOutput>$(ProjectDirectory)/Binaries/packages</PackagesOutput>
  </PropertyGroup>
  <PropertyGroup>
    <BuildCommand Condition="'$(BootstrapBuildToolsDir)' != ''">$(BuildCommand) --bootstrap_cli_path $(BootstrapBuildToolsDir)/dotnetcli/</BuildCommand>
    <BuildCommand Condition="'$(BootstrapMsbuildCliDir)' != ''">$(BuildCommand) --bootstrap_msbuild_cli_path $(BootstrapMsbuildCliDir)</BuildCommand>
  </PropertyGroup>

  <ItemGroup>
    <RepositoryReference Include="coreclr" />
    <RepositoryReference Include="corefx" />
  </ItemGroup>
</Project>
